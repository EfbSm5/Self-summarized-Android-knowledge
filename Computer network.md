# 输入网址到显示网页：过程梳理

## 1. 输入 URL 后发生什么
- URL 组成与默认资源
  - 示例：bilibili.com
  - 若路径未指定后缀，通常访问默认资源（如 index.html）
- 目标：定位对应的 Web 服务器

## 2. 生成并发送 HTTP 请求
- 构造 HTTP 请求报文（方法、路径、头、体）
- 待网络层可达后发送

## 3. 名称解析与寻址
- 仅有域名未知 IP：通过 DNS 将域名解析为 IP 地址
- 发送前需完成二层寻址：通过 ARP 获取目标 MAC（同网段）或网关 MAC（跨网段）

## 4. 协议栈与硬件发送
- 操作系统网络协议栈分层封装并交由网卡发送

## 5. TCP 连接建立（三次握手）
- 客户端：SYN
- 服务器：SYN + ACK
- 客户端：ACK，连接建立，开始传输数据
- 说明：服务器握手完成后从 LISTEN 转入 ESTABLISHED

## 6. HTTPS 额外的 TLS 握手（四步示意）
1) ClientHello：随机数、支持的协议与密码套件等
2) ServerHello：选择密码套件、返回随机数与服务器证书
3) 客户端验证证书，用服务器公钥加密新的随机数发给服务器；双方据此派生会话密钥；客户端以加密方式发送握手验证数据
4) 服务器也发送加密的握手验证数据；验证通过后加密通信开始

注：实际 TLS1.2/1.3 消息更细，TLS1.3 将往返数减少。

---

# Socket 与 WebSocket

- Socket：操作系统提供的网络通信编程接口与通信端点抽象，本质是对 TCP/UDP 的封装，不是协议。
- WebSocket：基于 TCP 的应用层协议，经由 HTTP(S) 握手升级为全双工、持久连接，常用于实时通信。

---

# 网络分层概览

- 应用层：提供应用接口（HTTP、DNS、WebSocket 等）
- 表示层：数据表示/编码转换
- 会话层：会话建立、管理、终止
- 传输层：端到端传输（TCP/UDP）
- 网络层：路由与转发（IP）
- 数据链路层：成帧、MAC 寻址（以太网）
- 物理层：比特在物理介质上传输

注：实际实现常以 TCP/IP 四层模型描述。

---

# UDP 视频聊天的丢包应对策略

- 自适应码率（ABR）：根据网络状况动态调整分辨率、码率、帧率，减少拥塞与丢包
- FEC 前向纠错：发送冗余包，接收端在不显著增加延迟下恢复少量丢包
- 受限重传：仅对关键数据有限度重传，设置严格超时，控制时延
- 错误隐藏（错误掩盖）：接收端使用插值/邻域像素/上一帧内容进行掩盖，弱化观感影响
- 目标：在延迟与画质间权衡，保证实时性与连贯性

---

# HTTP 版本演进

- HTTP/1.0：短连接
- HTTP/1.1：默认长连接，引入管道化但仍有队头阻塞
- HTTP/2：头部压缩、二进制分帧、多路复用，缓解 HTTP 层队头阻塞
- HTTP/3：基于 QUIC（UDP），进一步消除队头阻塞并改进握手与迁移

---

# HTTP 状态码分类

- 1xx 信息：请求已接收，继续处理
- 2xx 成功：请求成功处理
- 3xx 重定向：需要进一步操作
- 4xx 客户端错误：请求有误或无法完成
- 5xx 服务器错误：服务器处理请求时出错

---

# HTTP 请求报文结构

- 请求行：METHOD SP URL SP HTTP/Version
  - 例：GET /path HTTP/1.1
- 请求头部：若干键值对
  - 例：Host: apigo.cn
- 请求体：可选（如 POST/PUT 携带数据）

---  
# Http 长连接  
- 